(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{8161:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return a(4067)}])},4067:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var n=a(5893),r=a(7294),i=a(1163),c=a(1664),u=a(6230);function s(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e){var t=e.pageQuery,a=e.activePage,r=((0,i.useRouter)(),(0,u.bN)()),c=(r.searchData,r.searchResults),o=(r.isLoading,Math.ceil(c.totalCount/100));return(0,n.jsxs)("h5",{children:["Pages"," ",s(Array(o)).map((function(e,r){var c=r+1;return(0,n.jsx)("button",{onClick:function(){return e=c,void i.default.push({pathname:"/search",query:{q:t,page:e}});var e},className:+a===c?"pagination-button active-button":"pagination-button",children:c},r)}))]})}var l=function(){var e=(0,i.useRouter)(),t=(0,r.useState)([]),a=t[0],s=t[1],l=(0,r.useState)(""),f=l[0],h=l[1],d=(0,r.useState)(1),g=d[0],p=d[1],m=(0,u.bN)(),v=m.searchData,y=m.searchResults,b=m.isLoading;return(0,r.useEffect)((function(){e.query.q&&h(e.query.q),p(e.query.page||1)})),(0,r.useEffect)((function(){f&&v("https://api.magicthegathering.io/v1/cards?name=".concat(f,"&page=").concat(g))}),[f,g]),(0,r.useEffect)((function(){(y.length||y.allData)&&function(e){var t=[];e.allData.cards.forEach((function(e){var a=!1;if(e.printings.length>1)for(var n=0;n<t.length;n++)if(e.name===t[n].name||!e.imageUrl){a=!0;break}a||t.push(e)})),s(t)}(y)}),[y]),b?(0,n.jsx)("h3",{children:"Loading..."}):(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{children:["Search results ",g&&"page ".concat(g)]}),(0,n.jsx)("div",{className:"grid",children:a.map((function(e){return(0,n.jsx)("div",{className:"grid-item",children:(0,n.jsx)(c.default,{href:{pathname:"card",query:{id:e.multiverseid}},children:(0,n.jsx)("a",{className:"card-link",children:(0,n.jsx)("img",{src:e.imageUrl,alt:"",className:"card-image"})})})},e.id)}))}),y.totalCount/100>1&&(0,n.jsx)(o,{pageQuery:f,activePage:g})]})}},1163:function(e,t,a){e.exports=a(387)}},function(e){e.O(0,[774,888,179],(function(){return t=8161,e(e.s=t);var t}));var t=e.O();_N_E=t}]);