(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{8161:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return t(4067)}])},4067:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return l}});var r=t(5893),n=t(7294),i=t(1163),c=t(1664),s=t(6230);function u(e){return function(e){if(Array.isArray(e)){for(var a=0,t=new Array(e.length);a<e.length;a++)t[a]=e[a];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(e){var a=e.pageQuery,t=e.activePage,n=((0,i.useRouter)(),(0,s.bN)()),c=(n.searchData,n.searchResults),o=(n.isLoading,Math.ceil(c.totalCount/100));return(0,r.jsxs)("h5",{children:["Pages"," ",u(Array(o)).map((function(e,n){var c=n+1;return(0,r.jsx)("button",{onClick:function(){return e=c,void i.default.push({pathname:"/search",query:{q:a,page:e}});var e},className:+t===c?"pagination-button active-button":"pagination-button",children:c},n)}))]})}var l=function(){var e=(0,i.useRouter)(),a=(0,n.useState)([]),t=a[0],u=a[1],l=(0,n.useState)(""),h=l[0],f=l[1],d=(0,n.useState)(1),g=d[0],p=d[1],m=(0,s.bN)(),v=m.searchData,y=m.searchResults,b=m.isLoading;return(0,n.useEffect)((function(){e.query.q&&f(e.query.q),p(e.query.page||1)})),(0,n.useEffect)((function(){h&&v("https://api.magicthegathering.io/v1/cards?name=".concat(h,"&page=").concat(g))}),[h,g]),(0,n.useEffect)((function(){(y.length||y.allData)&&function(e){var a=[];e.allData.cards.forEach((function(e){var t=!1;if(e.printings.length>1)for(var r=0;r<a.length;r++)if(e.name===a[r].name||!e.imageUrl){t=!0;break}t||a.push(e)})),u(a)}(y)}),[y]),b?(0,r.jsx)("h3",{className:"search-loader",children:"Loading..."}):(0,r.jsxs)("div",{className:"results-area",children:[(0,r.jsxs)("h3",{children:["Search results ",g&&"page ".concat(g)]}),(0,r.jsx)("div",{className:"search-grid",children:t.map((function(e){return(0,r.jsx)("div",{className:"search-item",children:(0,r.jsx)(c.default,{href:{pathname:"card",query:{id:e.multiverseid}},children:(0,r.jsx)("a",{className:"card-link",children:(0,r.jsx)("img",{src:e.imageUrl,alt:"",className:"card-image"})})})},e.id)}))}),y.totalCount/100>1&&(0,r.jsx)(o,{pageQuery:h,activePage:g})]})}},1163:function(e,a,t){e.exports=t(387)}},function(e){e.O(0,[774,888,179],(function(){return a=8161,e(e.s=a);var a}));var a=e.O();_N_E=a}]);