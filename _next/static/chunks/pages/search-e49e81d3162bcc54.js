(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{8161:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search",function(){return t(4067)}])},4067:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return l}});var a=t(5893),r=t(7294),i=t(1163),c=t(1664),o=t(6230);function s(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e){var n=e.pageQuery,t=e.activePage,r=((0,i.useRouter)(),(0,o.bN)()),c=(r.searchData,r.searchResults),u=(r.isLoading,Math.ceil(c.totalCount/100));return(0,a.jsxs)("h5",{children:["Pages"," ",s(Array(u)).map((function(e,r){var c=r+1;return console.log(t),(0,a.jsx)("button",{onClick:function(){return e=c,void i.default.push({pathname:"/search",query:{q:n,page:e}});var e},className:+t===c?"pagination-button active-button":"pagination-button",children:c},r)}))]})}var l=function(){var e=(0,i.useRouter)(),n=(0,r.useState)([]),t=n[0],s=n[1],l=(0,r.useState)(""),f=l[0],h=l[1],g=(0,r.useState)(1),d=g[0],p=g[1],m=(0,o.bN)(),v=m.searchData,y=m.searchResults,b=m.isLoading;return(0,r.useEffect)((function(){console.log(e.query.q),e.query.q&&h(e.query.q),p(e.query.page||1)})),(0,r.useEffect)((function(){f&&v("https://api.magicthegathering.io/v1/cards?name=".concat(f,"&page=").concat(d))}),[f,d]),(0,r.useEffect)((function(){console.log(y),(y.length||y.allData)&&function(e){console.log(e);var n=[];e.allData.cards.forEach((function(e){var t=!1;if(e.printings.length>1)for(var a=0;a<n.length;a++)if(e.name===n[a].name||!e.imageUrl){t=!0;break}t||n.push(e)})),console.log(n),s(n)}(y),console.log(t)}),[y]),b?(0,a.jsx)("h3",{children:"Loading..."}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{children:["Search results ",d&&"page ".concat(d)]}),(0,a.jsx)("div",{className:"grid",children:t.map((function(e){return(0,a.jsx)("div",{className:"grid-item",children:(0,a.jsx)(c.default,{href:{pathname:"card",query:{id:e.multiverseid}},children:(0,a.jsx)("a",{className:"card-link",children:(0,a.jsx)("img",{src:e.imageUrl,alt:"",className:"card-image"})})})},e.id)}))}),y.totalCount/100>1&&(0,a.jsx)(u,{pageQuery:f,activePage:d})]})}},1163:function(e,n,t){e.exports=t(387)}},function(e){e.O(0,[774,888,179],(function(){return n=8161,e(e.s=n);var n}));var n=e.O();_N_E=n}]);